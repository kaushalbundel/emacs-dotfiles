<p>I just published the latest stable release of <a href="https://protesilaos.com/emacs/modus-themes">the Modus
themes</a>.  The change log
entry is reproduced further below.  For any questions, feel welcome to
<a href="https://protesilaos.com/contact/">contact me</a>.</p>

<p>I will soon install the changes in emacs.git so please wait a little
longer for the updates to trickle down to you.</p>

<ul>
  <li>Package name (GNU ELPA): <code class="language-plaintext highlighter-rouge">modus-themes</code> (also built into Emacs 28+)</li>
  <li>Official manual: <a href="https://protesilaos.com/emacs/modus-themes">https://protesilaos.com/emacs/modus-themes</a></li>
  <li>Change log: <a href="https://protesilaos.com/emacs/modus-themes-changelog">https://protesilaos.com/emacs/modus-themes-changelog</a></li>
  <li>Colour palette: <a href="https://protesilaos.com/emacs/modus-themes-colors">https://protesilaos.com/emacs/modus-themes-colors</a></li>
  <li>Sample pictures: <a href="https://protesilaos.com/emacs/modus-themes-pictures">https://protesilaos.com/emacs/modus-themes-pictures</a></li>
  <li>Git repo on SourceHut: <a href="https://git.sr.ht/~protesilaos/modus-themes">https://git.sr.ht/~protesilaos/modus-themes</a>
    <ul>
      <li>Mirrors:
        <ul>
          <li>GitHub: <a href="https://github.com/protesilaos/modus-themes">https://github.com/protesilaos/modus-themes</a></li>
          <li>GitLab: <a href="https://gitlab.com/protesilaos/modus-themes">https://gitlab.com/protesilaos/modus-themes</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Mailing list: <a href="https://lists.sr.ht/~protesilaos/modus-themes">https://lists.sr.ht/~protesilaos/modus-themes</a></li>
  <li>Backronym: My Old Display Unexpectedly Sharpened … themes</li>
</ul>

<hr />

<h2>All themes except the tritanopia ones have a new hover colour</h2>

<p>The previous colour was not sufficiently distinct from what each theme
defines for the <code class="language-plaintext highlighter-rouge">bg-completion</code> palette entry (preview a palette with
<code class="language-plaintext highlighter-rouge">M-x modus-themes-preview-colors</code> or <code class="language-plaintext highlighter-rouge">M-x modus-themes-preview-colors-current</code>).
This would make it hard to spot the difference while, for example,
using <code class="language-plaintext highlighter-rouge">vertico-mode</code> in tandem with <code class="language-plaintext highlighter-rouge">vertico-mouse-mode</code>.</p>

<p>Same principle for the difference between the mouse hover and lazy
isearch highlights (e.g. in Dired or Occur buffers).</p>

<p>Changing the hue here follows the same principle that underpinned the
redesign of the grey backgrounds for version 4 of the project:
depending on hardware capabilities, colour reproduction may not be
optimal, so we need to be more considerate with the choice of colour
values, erring on the side of caution.</p>

<p>The <code class="language-plaintext highlighter-rouge">modus-operandi-tritanopia</code> and <code class="language-plaintext highlighter-rouge">modus-vivendi-tritanopia</code> themes
are not affected by this initiative, as they already used highly distinct hues.</p>

<p>Thanks to Daniel Mendler for bringing this matter to my attention and
for testing the proposed alternatives.  This was done via a private
channel and the information is shared with permission.  Daniel is the
developer of <code class="language-plaintext highlighter-rouge">vertico</code>, among many other excellent packages:
<a href="https://github.com/minad">https://github.com/minad</a></p>

<h2>Japanese holidays have the expected style</h2>

<p>Japanese calendars style Saturdays uniquely and the Modus themes now
do the same for those who use the <code class="language-plaintext highlighter-rouge">japanese-holidays</code> package.
Saturdays show up in a blue colour (which changes to cyan for the
<code class="language-plaintext highlighter-rouge">modus-operandi-tritanopia</code>, <code class="language-plaintext highlighter-rouge">modus-vivendi-tritanopia</code> themes).</p>

<p>Each theme’s palette has a new semantic colour mapping called
<code class="language-plaintext highlighter-rouge">date-holiday-other</code>, just in case we ever encounter another scenario
like this one (users can override any entry in the palette—consult
the manual for the technicalities).</p>

<p>Thanks to Olaf Meeuwissen for bringing this package to my attention
and showing me how traditional Japanese calendars style Saturdays.
This was done in issue 311 on the GitLab mirror:
<a href="https://gitlab.com/protesilaos/modus-themes/-/issues/311">https://gitlab.com/protesilaos/modus-themes/-/issues/311</a>.</p>

<h2>Each theme has semantic colour mappings for terminal emulators</h2>

<p>These are used by <code class="language-plaintext highlighter-rouge">ansi-term</code>, <code class="language-plaintext highlighter-rouge">vterm</code>, and the like.  The idea is to
empower users to differentiate background and foreground values,
should they ever encounter a need to do so (when in doubt, do
nothing).</p>

<p>By convention, terminal emulators use the same value for both
background and foreground, although this is not optimal with high
contrast themes because what works as a foreground does not
necessarily look nice as a background.</p>

<p>The default values of the new mappings retain the prior state, just to
not break existing configurations.  Consider this a tacit user option
for those who really need it.</p>

<p>Thanks to Tony Zorman for reporting the problem that provided the
impetus for this change:
<a href="https://lists.sr.ht/~protesilaos/modus-themes/%3C87fs4wforf.fsf%40hyperspace%3E">https://lists.sr.ht/~protesilaos/modus-themes/%3C87fs4wforf.fsf%40hyperspace%3E</a>.</p>

<h2>All theme definitions conform with the latest standard for metadata</h2>

<p>Themes are expected to declare their background type and affinity,
such that the built-in command <code class="language-plaintext highlighter-rouge">theme-choose-variant</code> can do what it
describes (switch between related themes).  I was already doing this,
though I had to make some adjustments.  This is in response to Emacs
bug#65468: <a href="https://debbugs.gnu.org/cgi/bugreport.cgi?bug=65468">https://debbugs.gnu.org/cgi/bugreport.cgi?bug=65468</a>.
Thanks to Mauro Aranda for bringing the matter to my attention.</p>

<h2>Proper colours for the inline preview of the <code class="language-plaintext highlighter-rouge">corfu</code> top candidate</h2>

<p>The <code class="language-plaintext highlighter-rouge">corfu-candidate-overlay</code> package is used in tandem with the
<code class="language-plaintext highlighter-rouge">corfu</code> package to create an inline preview of the first matching
candidate.  Thanks to Nicolas Semrau for bringing this matter to my
attention in issue 89 on the GitHub mirror:
<a href="https://github.com/protesilaos/modus-themes/issues/89">https://github.com/protesilaos/modus-themes/issues/89</a>.</p>

<h2>Context indicators for the mode-line or header-line (breadcrumb.el)</h2>

<p>I added support for the new <code class="language-plaintext highlighter-rouge">breadcrumb</code> package by João Távora.  It
displays information about where we are in the given file, such as
under which Org heading or inside which function.  The indicator can
be shown on the mode-line or the header-line.  Either way, it will now
be legible and consistent with its surroundings.</p>

<h2>The new family of nerd-icons is covered by the themes</h2>

<p>This is a new set of packages: <code class="language-plaintext highlighter-rouge">nerd-icons</code>, <code class="language-plaintext highlighter-rouge">nerd-icons-completion,
~nerd-icons-dired</code>, <code class="language-plaintext highlighter-rouge">nerd-icons-ibuffer</code>.  A popular package that uses
the Nerd icons is <code class="language-plaintext highlighter-rouge">doom-modeline</code>, which the themes support as well.</p>

<h2>All icons look as intended again</h2>

<p>Some faces from the <code class="language-plaintext highlighter-rouge">all-the-icons</code> package were not configured
because I accidentally changed their name from something like
<code class="language-plaintext highlighter-rouge">all-the-icons-red-alt</code> to <code class="language-plaintext highlighter-rouge">all-the-icons-red-warmer</code>.  I did that
while renaming the colours defined in each theme’s palette, to make
them more meaningful (“warmer red” can hint at something whereas “alt
red” is more abstract).</p>

<h2>Corrected the documentation about custom Org faces</h2>

<p>The Modus themes manual shows how to configure arbitrary TODO keywords
to inherit the style of an arbitrary face (get the list of faces
present in your Emacs with <code class="language-plaintext highlighter-rouge">M-x list-faces-display</code>).  The previous
value I used was faulty.  It now is as intended.  Thanks to
soaringbird for reporting the issue on the mailing list:
<a href="https://lists.sr.ht/~protesilaos/modus-themes/%3CNXPVkVk--3-9%40tuta.io%3E">https://lists.sr.ht/~protesilaos/modus-themes/%3CNXPVkVk--3-9%40tuta.io%3E</a>.</p>

<h2>The colours used by <code class="language-plaintext highlighter-rouge">avy</code> are better for users with tritanopia</h2>

<p>I changed the sequence of colours displayed by commands such as
<code class="language-plaintext highlighter-rouge">avy-goto-char-timer</code> such that each individual background does not
blend with the ones adjacent to it, while respecting the overall needs
of a tritanopia-friendly design.  I also tweaked the colour values to
achieve the desired result.  The backgrounds remain distinct from
their context but now also work harmoniously together.</p>

<h2>The <code class="language-plaintext highlighter-rouge">bg-dim</code> palette entry is marginally brighter in all Modus operandi variants</h2>

<p>After extensive testing and side-by-side comparisons, I have concluded
that the marginal increase in brightness improves the affected
interfaces.</p>

<p>The <code class="language-plaintext highlighter-rouge">bg-dim</code> background is used, among others, in the header-line, the
popup of the <code class="language-plaintext highlighter-rouge">company</code> and <code class="language-plaintext highlighter-rouge">corfu</code> packages, as well as the Org source
blocks (when the user option <code class="language-plaintext highlighter-rouge">modus-themes-org-blocks</code> is configured
appropriately).</p>

<h2>The “intense” palette override preset has new colours for tables and prose metadata</h2>

<p>This concerns the <code class="language-plaintext highlighter-rouge">modus-themes-preset-overrides-intense</code> (refer to
its documentation on how to use it).  The primary target of these
changes is Org mode and the overall effect is subtle.  The previous
colours did not combine nicely with all structural elements.  For
example, Org clocktables would obscure timestamps by being the same
colour as them, while the table formula would not stand out.  These
styles did not fit into the concept of “intense” colours.</p>

<h2>The “warmer” palette override preset has more legible strings</h2>

<p>The <code class="language-plaintext highlighter-rouge">modus-themes-preset-overrides-warmer</code> uses a more prominent warm
green value for strings in programming modes.  The effect is subtle,
though it fits in better with the overall aesthetic of these palette
overrides.</p>

<h2>Org document keywords like <code class="language-plaintext highlighter-rouge">#+author</code> are optionally monospaced</h2>

<p>When the user option <code class="language-plaintext highlighter-rouge">modus-themes-mixed-fonts</code> is non-nil, all Org
document keywords will be rendered with the <code class="language-plaintext highlighter-rouge">fixed-pitch</code> face.  This
ensures consistency between keywords such as <code class="language-plaintext highlighter-rouge">#+author</code> and “meta
lines” like <code class="language-plaintext highlighter-rouge">#+texinfo</code>.  Thanks to user fluentpwn for the change: it
is one line and thus the author does not need to assign copyright to
the Free Software Foundation.</p>

<h2>Git commit summary lines have a more precise style</h2>

<p>This concerns the first line in a Git commit message, as seen while
working with the <code class="language-plaintext highlighter-rouge">magit</code> package.  Same principle for the <code class="language-plaintext highlighter-rouge">log-edit</code>
buffer used by the built-in VC framework.  Before, I was hardcoding a
blue colour value, whereas now I apply the <code class="language-plaintext highlighter-rouge">success</code> face.  The
<code class="language-plaintext highlighter-rouge">success</code> face is designed to contrast with the <code class="language-plaintext highlighter-rouge">warning</code> face that is
used to show overlong summaries.  Furthermore, the added indirection
makes it possible to particularise the colour value, which I do for
the tritanopia themes that cannot use blue.</p>

<h2>Miscellaneous</h2>

<ul>
  <li>
    <p>Removed explicit support for the built-in <code class="language-plaintext highlighter-rouge">css-mode</code>.  Its default
faces are decent.  They inherit from standard font-lock faces that
the themes already cover.</p>
  </li>
  <li>
    <p>Recalibrated wordwise (“refined”) diffs for deuteranopia.  The
<code class="language-plaintext highlighter-rouge">modus-operandi-deuteranopia</code> and <code class="language-plaintext highlighter-rouge">modus-vivendi-deuteranopia</code> have
a little bit more intense colour values applied to wordwise, else
“refined”, diffs.  These concern removed lines.  The effect is
visible while using <code class="language-plaintext highlighter-rouge">magit</code> or the built-in <code class="language-plaintext highlighter-rouge">diff-mode</code>.</p>
  </li>
  <li>
    <p>Backported emacs.git commit <code class="language-plaintext highlighter-rouge">4cf33b6bd02b868ebbf112da7926d7c3c64517ce</code>.
It removed the space from the front matter of the <code class="language-plaintext highlighter-rouge">modus-themes.org</code>
file (i.e. the manual) because the Org export did not produce the
right results, per Emacs bug#64548.  Thanks to Stephen Berman for
reporting the issue and making the requisite change.</p>
  </li>
  <li>
    <p>Added support for the <code class="language-plaintext highlighter-rouge">erts-mode</code>.  Thanks to Kevin Fleming for
informing me about this built-in mode.  This was done in issue 85
on the GitHub mirror:
<a href="https://github.com/protesilaos/modus-themes/issues/85">https://github.com/protesilaos/modus-themes/issues/85</a>.</p>
  </li>
  <li>
    <p>Fixed a typo in the <code class="language-plaintext highlighter-rouge">modus-themes-preset-overrides-intense</code> doc
string.  Thanks to Nicolas Semrau for bringing this matter to my
attention.  It was done in issue 90 on the GitHub mirror:
<a href="https://github.com/protesilaos/modus-themes/issues/90">https://github.com/protesilaos/modus-themes/issues/90</a>.</p>
  </li>
  <li>
    <p>Made all commands that prompt for a theme (<code class="language-plaintext highlighter-rouge">modus-themes-select</code>,
<code class="language-plaintext highlighter-rouge">modus-themes-preview-colors</code>) apply the <code class="language-plaintext highlighter-rouge">theme</code> category to the
available candidates.  This allows the user to target said category
to affect the relevant functions.  For example, to set completion
styles with <code class="language-plaintext highlighter-rouge">completion-category-overrides</code> or to define a custom
annotation function with the <code class="language-plaintext highlighter-rouge">marginalia</code> package.</p>
  </li>
  <li>
    <p>Added support for new <code class="language-plaintext highlighter-rouge">appt-notification</code> face (Emacs 30).  Change
upstream by me.</p>
  </li>
</ul>