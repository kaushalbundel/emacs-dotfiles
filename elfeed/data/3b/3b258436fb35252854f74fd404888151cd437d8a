<p>Denote aims to be a simple-to-use, focused-in-scope, and effective
note-taking and file-naming tool for Emacs.</p>

<p>Denote is based on the idea that files should follow a predictable and
descriptive file-naming scheme.  The file name must offer a clear
indication of what the contents are about, without reference to any
other metadata.  Denote basically streamlines the creation of such
files or file names while providing facilities to link between them
(where those files are editable).</p>

<p>Denote’s file-naming scheme is not limited to “notes”.  It can be used
for all types of file, including those that are not editable in Emacs,
such as videos.  Naming files in a constistent way makes their
filtering and retrieval considerably easier.  Denote provides relevant
facilities to rename files, regardless of file type.</p>

<ul>
  <li>Package name (GNU ELPA): <code class="language-plaintext highlighter-rouge">denote</code></li>
  <li>Official manual: <a href="https://protesilaos.com/emacs/denote">https://protesilaos.com/emacs/denote</a></li>
  <li>Change log: <a href="https://protesilaos.com/emacs/denote-changelog">https://protesilaos.com/emacs/denote-changelog</a></li>
  <li>Git repo on SourceHut: <a href="https://git.sr.ht/~protesilaos/denote">https://git.sr.ht/~protesilaos/denote</a>
    <ul>
      <li>Mirrors:
        <ul>
          <li>GitHub: <a href="https://github.com/protesilaos/denote">https://github.com/protesilaos/denote</a></li>
          <li>GitLab: <a href="https://gitlab.com/protesilaos/denote">https://gitlab.com/protesilaos/denote</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Mailing list: <a href="https://lists.sr.ht/~protesilaos/denote">https://lists.sr.ht/~protesilaos/denote</a></li>
  <li>Video demo: <a href="https://protesilaos.com/codelog/2022-06-18-denote-demo/">https://protesilaos.com/codelog/2022-06-18-denote-demo/</a>.</li>
  <li>Backronyms: Denote Everything Neatly; Omit The Excesses.  Don’t Ever
Note Only The Epiphenomenal.</li>
</ul>

<p>Below are the release notes.</p>

<hr />

<h1>Version 2.1.0 on 2023-11-12</h1>

<p>The general theme of this release is improvements to the quality of
life with Denote. While these release notes and the overall
documentation are comprehensive, make no mistake: Denote can be used
with <code class="language-plaintext highlighter-rouge">M-x denote</code>, <code class="language-plaintext highlighter-rouge">M-x denote-link</code>, <code class="language-plaintext highlighter-rouge">M-x denote-backlinks</code>, <code class="language-plaintext highlighter-rouge">M-x
denote-rename-file</code>. These have been rock solid from the beginning.
Everything else is for more specialised workflows.</p>

<p>I hope to produce a companion video to this changelog in the coming
days. Though I am still reeling from the injury to my left hand (I
wrote all this to not delay the package any longer). Please check back
in my website’s coding blog section to find the follow-up video:
<a href="https://protesilaos.com/codelog">https://protesilaos.com/codelog</a>.</p>

<p>[ Remember to consult the manual whenever you have a question about
  Denote. It is comprehensive and, in my opinion, a paradigm of how
  free software should be done for the benefit of users. I document
  everything in detail and am eager to continue this way. If something
  is unclear, contact me in person, use the mailing list, or open an
  issue on the GitHub/GitLab mirror. I do not check other fora or
  media and will thus not help you there. If you are writing custom
  code, remember to read the doc strings. I write them for you too. ]</p>

<h2>Deprecated the <code class="language-plaintext highlighter-rouge">denote-allow-multi-word-keywords</code></h2>

<p>This user option enabled the use of keywords that consisted of
multiple words. Those would be separated by hyphens. Such keywords do
not work as Org <code class="language-plaintext highlighter-rouge">#+filetags</code> and also mess up with the neat search
semantics of Denote’s file-naming scheme where a hyphen prefix
anchors the query to the <code class="language-plaintext highlighter-rouge">TITLE</code> component of the name.</p>

<p>Users who absolutely need multi-word keywords are encouraged to use
the new <code class="language-plaintext highlighter-rouge">denote-file-name-letter-casing</code> option. More below.</p>

<h2>Control the letter casing of file name components</h2>

<p>By default, Denote downcases all components of the file name. The user
option <code class="language-plaintext highlighter-rouge">denote-file-name-letter-casing</code> provides granular control over
this behaviour.</p>

<p>The value it accepts is an alist where each element is a cons cell of
the form <code class="language-plaintext highlighter-rouge">(COMPONENT . METHOD)</code>. The manual, or the variable’s doc
string, cover the details. The gist is that we can now instruct Denote
to accept input verbatim, such as because we want to apply a
<code class="language-plaintext highlighter-rouge">camelCase</code> convention or variants thereof.</p>

<p>Here is an example, where we downcase the title, but preserve the
letter casing of the signature and keyword components with this:</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="k">setq</span> <span class="nv">denote-file-name-letter-casing</span>
      <span class="o">'</span><span class="p">((</span><span class="nv">title</span> <span class="o">.</span> <span class="nv">downcase</span><span class="p">)</span>
        <span class="p">(</span><span class="nv">signature</span> <span class="o">.</span> <span class="nv">verbatim</span><span class="p">)</span>
        <span class="p">(</span><span class="nv">keywords</span> <span class="o">.</span> <span class="nv">verbatim</span><span class="p">)</span>
        <span class="p">(</span><span class="no">t</span> <span class="o">.</span> <span class="nv">downcase</span><span class="p">)))</span>
</code></pre></div></div>

<p>Users of the now-deprecated <code class="language-plaintext highlighter-rouge">denote-allow-multi-word-keywords</code> are
encouraged to implement a letter casing convention with the help of
this new user option.</p>

<p>Relevant sections in the manual:</p>

<ul>
  <li>The file-naming scheme:
<a href="https://protesilaos.com/emacs/denote#h:4e9c7512-84dc-4dfb-9fa9-e15d51178e5d">https://protesilaos.com/emacs/denote#h:4e9c7512-84dc-4dfb-9fa9-e15d51178e5d</a>.</li>
  <li>Contol the letter casing of file names:
<a href="https://protesilaos.com/emacs/denote#h:6ae1ab8c-5e36-4216-8e93-f37f4447582c">https://protesilaos.com/emacs/denote#h:6ae1ab8c-5e36-4216-8e93-f37f4447582c</a></li>
</ul>

<h2>The <code class="language-plaintext highlighter-rouge">denote-dired-mode</code> should now work while toggling <code class="language-plaintext highlighter-rouge">wdired</code></h2>

<p>The writable version of Dired would break the colouration applied by
<code class="language-plaintext highlighter-rouge">denote-dired-mode</code>. I have arranged for this to not happen anymore,
although it means that I had to add an advice to relevant wdired
symbols because no proper hook is on offer.</p>

<h2>The “do or create” commands are more intuitive to use</h2>

<p>Denote provides several commands with a “do or create” logic. For
example, the <code class="language-plaintext highlighter-rouge">denote-open-or-create</code> prompts for a file to visit: if
something matches the user’s input, it is visited in a buffer,
otherwise a new note is created with the given input. Same for
<code class="language-plaintext highlighter-rouge">denote-link-or-create</code>, mutatis mutandis.</p>

<p>Before, the “… or create” step did not make it obvious how the
previous search terms could be reused. Whereas now those are set as
the default minibuffer value at the title prompt, meaning that typing
<code class="language-plaintext highlighter-rouge">RET</code> at the empty prompt will use that value, while <code class="language-plaintext highlighter-rouge">M-n</code>
(<code class="language-plaintext highlighter-rouge">next-history-element</code> with default settings) will put the text into
the prompt for further editing.</p>

<p>I will answer this because I get asked about it: we still refrain from
creating the new note outright because the search terms are not
necessarily suitable for a new title. Remember that Denote’s file name
is optimised for searching: <code class="language-plaintext highlighter-rouge">-word</code> is specific to the title, <code class="language-plaintext highlighter-rouge">_word</code>
to the keywords, and <code class="language-plaintext highlighter-rouge">=word</code> to the signature. Combine this with the
<code class="language-plaintext highlighter-rouge">orderless</code> package and you frequently type something like <code class="language-plaintext highlighter-rouge">_jou -he</code>
to match a file with the <code class="language-plaintext highlighter-rouge">journal</code> keyword and the word <code class="language-plaintext highlighter-rouge">hesitation</code>
in its title.</p>

<p><strong>IMPORTANT NOTE:</strong> some minibuffer completion User Interfaces preselect
the first completion candidate, which is not always the same as the
default value. Check with your UI of choice how to pass a default
value and/or provide an empty input. For example, with the <code class="language-plaintext highlighter-rouge">vertico</code>
package one can move up from the first candidate to select the prompt
itself (the counter switches from <code class="language-plaintext highlighter-rouge">1/N</code> to <code class="language-plaintext highlighter-rouge">*/N</code>).</p>

<p>Relevant sections in the manual:</p>

<ul>
  <li>Open an existing note or create it if missing:
<a href="https://protesilaos.com/emacs/denote#h:ad91ca39-cf10-4e16-b224-fdf78f093883">https://protesilaos.com/emacs/denote#h:ad91ca39-cf10-4e16-b224-fdf78f093883</a>.</li>
  <li>Link to a note or create it if missing:
<a href="https://protesilaos.com/emacs/denote#h:9e41e7df-2aac-4835-94c5-659b6111e6de">https://protesilaos.com/emacs/denote#h:9e41e7df-2aac-4835-94c5-659b6111e6de</a>.</li>
</ul>

<h3>New “… or create with command” features for more flexibility</h3>

<p>As part of the wider “do or create” feature set, Denote provides the
option to run a specific note-creating command instead of just using
the standard <code class="language-plaintext highlighter-rouge">denote</code> one. For example, it is possible to call the
<code class="language-plaintext highlighter-rouge">denote-subdirectory</code> command to pick a subdirectory of the
<code class="language-plaintext highlighter-rouge">denote-directory</code> for the new note. Commands providing this facility
are <code class="language-plaintext highlighter-rouge">denote-open-or-create-with-command</code> and <code class="language-plaintext highlighter-rouge">denote-link-after-creating-with-command</code>.</p>

<p>Thanks to Vedang Manerikar for fixing a broken <code class="language-plaintext highlighter-rouge">if</code> clause during
development: <a href="https://lists.sr.ht/~protesilaos/denote/patches/46087">https://lists.sr.ht/~protesilaos/denote/patches/46087</a>.</p>

<h2>The title and signature prompts use minibuffer completion</h2>

<p>All Denote minibuffer prompts come with their own history. This means
that <code class="language-plaintext highlighter-rouge">M-p</code> (<code class="language-plaintext highlighter-rouge">previous-history-element</code>) and <code class="language-plaintext highlighter-rouge">M-n</code>
(<code class="language-plaintext highlighter-rouge">next-history-element</code>) always return relevant input.</p>

<p>The title and signature prompts now reuse their input history to
provide completion. This means that the user can quickly access
previous inputs, either to pass them directly or edit them further
before inputting them.</p>

<p>[ Use the built-in <code class="language-plaintext highlighter-rouge">savehist-mode</code> to persist histories across sessions. ]</p>

<p>Remember to check with your minibuffer UI on how to input empty
values at the prompt, should you ever need to do so.</p>

<p>For posterity, I first implemented this in commit <code class="language-plaintext highlighter-rouge">0d855bb</code>. However,
it did not work with the default minibuffer because the <code class="language-plaintext highlighter-rouge">SPC</code> key
performs completion (popping up the Completions buffer). So users
could not easily input an arbitrary string for the title/signature. I
thus reverted that commit in <code class="language-plaintext highlighter-rouge">9f692cb</code>.</p>

<p>[ The bug was reported by Suhail Singh on the mailing list:
  <a href="https://lists.sr.ht/~protesilaos/denote/%3C652d82c0.c80a0220.e6282.dc47%40mx.google.com%3E#%3C65392fa6.050a0220.da61c.0ac8@mx.google.com%3E">https://lists.sr.ht/~protesilaos/denote/%3C652d82c0.c80a0220.e6282.dc47%40mx.google.com%3E#%3C65392fa6.050a0220.da61c.0ac8@mx.google.com%3E</a>. ]</p>

<p>Stefan Monnier suggested the use of the <code class="language-plaintext highlighter-rouge">minibuffer-with-setup-hook</code>,
which lets us disable <code class="language-plaintext highlighter-rouge">SPC</code> completion for the purposes of these
functions. This is most welcome as the functionality is nice to have.
Stefan’s feedback was provided on the emacs-devel mailing list:
<a href="https://lists.gnu.org/archive/html/emacs-devel/2023-10/msg00631.html">https://lists.gnu.org/archive/html/emacs-devel/2023-10/msg00631.html</a>.</p>

<h2>Create a note with the region’s contents</h2>

<p>The command <code class="language-plaintext highlighter-rouge">denote-region</code> takes the contents of the active region
and then prompts for a title and keywords.  Once a new note is
created, it inserts the contents of the region therein.  This is
useful to quickly elaborate on some snippet of text or capture it for
future reference.</p>

<p>It also provides the <code class="language-plaintext highlighter-rouge">denote-region-after-new-note-functions</code> abnormal
hook. Read the manual for more:
<a href="https://protesilaos.com/emacs/denote#h:2f8090f1-50af-4965-9771-d5a91a0a87bd">https://protesilaos.com/emacs/denote#h:2f8090f1-50af-4965-9771-d5a91a0a87bd</a>.</p>

<h2>Comprehensive refinements to the <code class="language-plaintext highlighter-rouge">denote-rename-buffer-mode</code></h2>

<p>This is an opt-in feature that automatically renames the buffer of
newly visited Denote files according to the user’s preferences. Not to
be confused with renaming files: buffers are internal to Emacs. Enable
it at startup by adding this to your configuration file:</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nv">denote-rename-buffer-mode</span> <span class="mi">1</span><span class="p">)</span>
</code></pre></div></div>

<p>Relevant entries in the manual:</p>

<ul>
  <li>Automatically rename Denote buffers:
<a href="https://protesilaos.com/emacs/denote#h:3ca4db16-8f26-4d7d-b748-bac48ae32d69">https://protesilaos.com/emacs/denote#h:3ca4db16-8f26-4d7d-b748-bac48ae32d69</a>.</li>
  <li>The <code class="language-plaintext highlighter-rouge">denote-rename-buffer-format</code> option:
<a href="https://protesilaos.com/emacs/denote#h:35507c18-35b1-41b9-9d80-52f54fcef3cb">https://protesilaos.com/emacs/denote#h:35507c18-35b1-41b9-9d80-52f54fcef3cb</a>.</li>
</ul>

<h3>The <code class="language-plaintext highlighter-rouge">denote-rename-buffer-format</code> option</h3>

<p>The user option <code class="language-plaintext highlighter-rouge">denote-rename-buffer-format</code> controls how the
function <code class="language-plaintext highlighter-rouge">denote-rename-buffer</code> chooses the name of the
buffer-to-be-renamed. This function is the one used by the
<code class="language-plaintext highlighter-rouge">denote-rename-buffer-mode</code>.</p>

<p>Users may want, for example, to include some text that makes Denote
buffers stand out, such as a <code class="language-plaintext highlighter-rouge">[D]</code> prefix. Examples:</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">;; Use the title (default)</span>
<span class="p">(</span><span class="k">setq</span> <span class="nv">denote-rename-buffer-format</span> <span class="s">"%t"</span><span class="p">)</span>

<span class="c1">;; Use the title and keywords with some emoji in between.</span>
<span class="p">(</span><span class="k">setq</span> <span class="nv">denote-rename-buffer-format</span> <span class="s">"%t 🤨 %k"</span><span class="p">)</span>

<span class="c1">;; Use the title with a literal "[D]" before it</span>
<span class="p">(</span><span class="k">setq</span> <span class="nv">denote-rename-buffer-format</span> <span class="s">"[D] %t"</span><span class="p">)</span>
</code></pre></div></div>

<p>The manual or doc string of <code class="language-plaintext highlighter-rouge">denote-rename-buffer-format</code> cover the
technicalities of the available format specifiers.</p>

<p>Users who need yet more flexibility are best served by writing their
own function and assigning it to the <code class="language-plaintext highlighter-rouge">denote-rename-buffer-function</code>
(in such a case, please contact me as I am curious to know what the
underlying need is).</p>

<p>Thanks to Jean-Philippe Gagné Guay for intermediately refining parts
of the code. This was done in pull request 177 on the GitHub mirror:
<a href="https://github.com/protesilaos/denote/pull/177">https://github.com/protesilaos/denote/pull/177</a>.</p>

<p>Thanks to Vedang Manerikar for ensuring that the string of the buffer
is trimmed so that it never starts with an empty space (those buffers
count as “internal” to Emacs and are not shown to the user):
<a href="https://lists.sr.ht/~protesilaos/denote/patches/46243">https://lists.sr.ht/~protesilaos/denote/patches/46243</a>.</p>

<h3>The <code class="language-plaintext highlighter-rouge">denote-rename-buffer-mode</code> also works with unsaved buffers</h3>

<p>Internal refinements to a Denote Lisp macro make this minor mode also
work with new and unsaved Denote buffers. Whereas before only the
buffers of existing files would be renamed.</p>

<h2>Denote’s renaming facilities are better than ever</h2>

<p>Denote’s value proposition is its efficient file-naming scheme that
makes it easier to retrieve files even with rudimentary search tools.
We provide several commands to rename existing files according to this
scheme. The underlying file type does not matter (e.g. I use Denote to
name my video files).</p>

<p>Relevant sections in the manual:</p>

<ul>
  <li>Renaming files:
<a href="https://protesilaos.com/emacs/denote#h:532e8e2a-9b7d-41c0-8f4b-3c5cbb7d4dca">https://protesilaos.com/emacs/denote#h:532e8e2a-9b7d-41c0-8f4b-3c5cbb7d4dca</a>.</li>
  <li>Front matter:
<a href="https://protesilaos.com/emacs/denote#h:13218826-56a5-482a-9b91-5b6de4f14261">https://protesilaos.com/emacs/denote#h:13218826-56a5-482a-9b91-5b6de4f14261</a>.</li>
</ul>

<h3>Rename like an expert with <code class="language-plaintext highlighter-rouge">denote-rename-no-confirm</code></h3>

<p>By default, the <code class="language-plaintext highlighter-rouge">denote-rename-file</code> command asks for a final
confirmation before carrying out its function. The new user option
<code class="language-plaintext highlighter-rouge">denote-rename-no-confirm</code> can be bound to a non-nil value to skip
that step.</p>

<p>This only applies to <code class="language-plaintext highlighter-rouge">denote-rename-file</code>. Other commands that rename
files in bulk never prompt for such confirmation (it would make them
cumbersome to use, plus it is assumed that the user who performs a
batch operation understands the implications).</p>

<h3>The <code class="language-plaintext highlighter-rouge">denote-rename-file</code> command prompts for a signature</h3>

<p>This command used to only ask for a title and keywords. Now it allows
to use a signature as well. An empty input means that the signature is
ignored. AGAIN, please check with your minibuffer completion UI on how
to input an empty value, otherwise you will not get what you expect.</p>

<h3>Rename mutliple files sequentially with <code class="language-plaintext highlighter-rouge">denote-dired-rename-files</code></h3>

<p>This provides the same interface as <code class="language-plaintext highlighter-rouge">denote-rename-file</code>, only it
works over a list of marked Dired files.</p>

<p>Internally, the prompts for title, keywords, and signature are
improved to display the underlying file that is affected by the
current operation. As the user renames files, the prompts reflect
which one is current.</p>

<h3>The name of <code class="language-plaintext highlighter-rouge">denote-dired-rename-marked-files</code> has changed</h3>

<p>It is now called <code class="language-plaintext highlighter-rouge">denote-dired-rename-marked-files-with-keywords</code> to
better communicate what it does. In short, this is a quick way to add
the given keywords to a list of files, converting them to the Denote
file-naming scheme in case they are not already using it. For the full
interactive power, use the aforementioned <code class="language-plaintext highlighter-rouge">denote-dired-rename-files</code>.</p>

<h3>The <code class="language-plaintext highlighter-rouge">denote-rename-file-using-front-matter</code> can be used without saving its buffer</h3>

<p>This is now possible because of changes to underlying functions (a
Denote Lisp macro—not to bother you with technicalities).</p>

<p>Same principle for <code class="language-plaintext highlighter-rouge">denote-rename-file-using-front-matter</code>.</p>

<h3>The name of <code class="language-plaintext highlighter-rouge">denote-change-file-type</code> has changed</h3>

<p>It is now called <code class="language-plaintext highlighter-rouge">denote-change-file-type-and-front-matter</code> to avoid
confusion as to whether Denote converts files from one format to
another (there are specialised tools for that).</p>

<h3>Renaming a file returns the new file path for programmatic use</h3>

<p>Thanks to mentalisttraceur for requesting this feature in issue 183 on
the GitHub mirror: <a href="https://github.com/protesilaos/denote/issues/183">https://github.com/protesilaos/denote/issues/183</a>.</p>

<h2>Link to a file with a signature</h2>

<p>The <code class="language-plaintext highlighter-rouge">denote-link-with-signature</code> command prompts for a file that has a
<code class="language-plaintext highlighter-rouge">SIGNATURE</code> component and links to it. The link’s description includes
the text of the signature as well as the title.</p>

<p>Thanks to Mark Olson for mentioning this idea. It was done in issue
167 on the GitHub mirror: <a href="https://github.com/protesilaos/denote/issues/167">https://github.com/protesilaos/denote/issues/167</a>.</p>

<p>I implemented it live, while also refactoring relevant parts of the
code to be more abstract/reusable:
<a href="https://protesilaos.com/codelog/2023-09-25-emacs-live-mostly-denote/">https://protesilaos.com/codelog/2023-09-25-emacs-live-mostly-denote/</a>.</p>

<p>Thanks to Alan Schmitt for spotting and fixing a regression caused by
the above:
<a href="https://lists.sr.ht/~protesilaos/denote/%3Cm2cyy5rt68.fsf%40mac-03220211.irisa.fr%3E">https://lists.sr.ht/~protesilaos/denote/%3Cm2cyy5rt68.fsf%40mac-03220211.irisa.fr%3E</a>.</p>

<h2>Renaming GPG or Age encrypted file works as expected</h2>

<p>Emacs can seamlessly visit a <code class="language-plaintext highlighter-rouge">.gpg</code> or <code class="language-plaintext highlighter-rouge">.age</code> file. Denote has nothing
to do with encryption, though it takes care to recognise the
underlying file type and to perform its work accordingly. However,
prior versions of Denote contained a bug in how file extensions were
handled: it would keep the encryption extension but remove the file
type extension before it (so “.org.gpg” would wrongly become “.gpg”).</p>

<p>Thanks to Jens Östlund for reporting a bug with <code class="language-plaintext highlighter-rouge">denote-keywords-add</code>
on an encrypted file, which prompted me to investigate this further
and fix the issue holistically. This was done in issue 172 on the
GitHub mirror: <a href="https://github.com/protesilaos/denote/issues/172">https://github.com/protesilaos/denote/issues/172</a>.</p>

<p>Interested parties are advised to check the two new public functions,
<code class="language-plaintext highlighter-rouge">denote-get-file-extension</code> and <code class="language-plaintext highlighter-rouge">denote-get-file-extension-sans-encryption</code>,
for the implementation details. In short, we had a problem with all
operations that needed to retrieve the file extension when that
included an encryption component.</p>

<h2>The optional <code class="language-plaintext highlighter-rouge">denote-journal-extras</code></h2>

<p>The manual of Denote has long provided code samples to achieve
particularised results. Among those were snippets to streamline the
use of Denote for journaling.</p>

<p>To make things even easier for users, we now have the
<code class="language-plaintext highlighter-rouge">denote-journal-extras.el</code>. It consolidates the rich corpus of
documented snippets into an easy-to-use and formally maintained
package. Thanks to Vedang Manerikar for providing the impetus for this
process. This was done on the mailing list:
<a href="https://lists.sr.ht/~protesilaos/denote/patches/43255#%3C20230803170935.60833-2-ved.manerikar@gmail.com%3E">https://lists.sr.ht/~protesilaos/denote/patches/43255#%3C20230803170935.60833-2-ved.manerikar@gmail.com%3E</a>.</p>

<p>The new file is optional. It can be loaded thus:</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nb">require</span> <span class="ss">'denote-journal-extras</span><span class="p">)</span>
</code></pre></div></div>

<p>The main idea is to quickly create journal entries. Check the manual
for the details, including the commands to use and the variables to
configure: <a href="https://protesilaos.com/emacs/denote#h:4a6d92dd-19eb-4fcc-a7b5-05ce04da3a92">https://protesilaos.com/emacs/denote#h:4a6d92dd-19eb-4fcc-a7b5-05ce04da3a92</a>.</p>

<p>Thanks to Kostas Andreadis for working on a comment I had included in
a working state of the code about the inclusion of templates. Kostas
made it possible to use the Denote template prompt (per the
<code class="language-plaintext highlighter-rouge">denote-templates</code> user option) as part of the creation of a new
journal entry. This was done in pull request 173 on the GitHub mirror:
<a href="https://github.com/protesilaos/denote/pull/173">https://github.com/protesilaos/denote/pull/173</a>. The change is less
than 15 lines and thus Kostas does not need to assign copyright to the
Free Software Foundation.</p>

<p>Also thanks to TJ Stankus for reporting a case where
<code class="language-plaintext highlighter-rouge">denote-journal-extras-title-format</code> did not accept a <code class="language-plaintext highlighter-rouge">nil</code> value (as
it should). This was done in issue 176 on the GitHub mirror:
<a href="https://github.com/protesilaos/denote/issues/176">https://github.com/protesilaos/denote/issues/176</a>.</p>

<h2>The optional <code class="language-plaintext highlighter-rouge">denote-silo-extras</code></h2>

<p>This is the same idea as with the <code class="language-plaintext highlighter-rouge">denote-journal-extras.el</code>: we had
the code in the manual and are now formally distributing it. Thanks
again to Vedang Manerikar for initiating this process. It was done on
the mailing list:
<a href="https://lists.sr.ht/~protesilaos/denote/patches/43255">https://lists.sr.ht/~protesilaos/denote/patches/43255</a>.</p>

<p>Use this optional feature with:</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nb">require</span> <span class="ss">'denote-silo-extras</span><span class="p">)</span>
</code></pre></div></div>

<p>Consult the manual for the details:
<a href="https://protesilaos.com/emacs/denote#h:e43baf95-f201-4fec-8620-c0eb5eaa1c85">https://protesilaos.com/emacs/denote#h:e43baf95-f201-4fec-8620-c0eb5eaa1c85</a>.</p>

<h2>The infrastructure for unique identifiers is more robust</h2>

<p>For Denote version <code class="language-plaintext highlighter-rouge">2.0.0</code> I introduced a general scheme intended to
avoid scenaria where duplicate identifiers could be created (thus
breaking a premise of Denote). Jean-Philippe Gagné Guay iterated over
the code to make it more robust and to fix some of the cases I had not
accounted for. This was done in pull request 159 on the GitHub mirror:
<a href="https://github.com/protesilaos/denote/pull/159">https://github.com/protesilaos/denote/pull/159</a>. Same idea in pull
request 187: <a href="https://github.com/protesilaos/denote/pull/187">https://github.com/protesilaos/denote/pull/187</a>.</p>

<h2>For developers or advanced users</h2>

<p>Denote has a clean code base with small and composable functions. This
encourages hackability. Each definition in the source is documented,
while the manual provides an overview of every public symbol.</p>

<ul>
  <li>
    <p><strong>Added:</strong> <code class="language-plaintext highlighter-rouge">denote-get-file-extension</code>,
<code class="language-plaintext highlighter-rouge">denote-get-file-extension-sans-encryption</code>,
<code class="language-plaintext highlighter-rouge">denote-keywords-combine</code>,
<code class="language-plaintext highlighter-rouge">denote-retrieve-keywords-value-as-string</code>,
<code class="language-plaintext highlighter-rouge">denote-title-prompt-current-default</code>, <code class="language-plaintext highlighter-rouge">denote-command-prompt</code>.</p>
  </li>
  <li>
    <p><strong>Refactored:</strong> <code class="language-plaintext highlighter-rouge">denote-all-files</code>, <code class="language-plaintext highlighter-rouge">denote-signature-prompt</code>,
<code class="language-plaintext highlighter-rouge">denote-file-prompt</code>, <code class="language-plaintext highlighter-rouge">denote-title-prompt</code>,
<code class="language-plaintext highlighter-rouge">denote-rewrite-front-matter</code>.</p>
  </li>
</ul>

<p>Please read their documentation strings for the details. Or check the
manual: <a href="https://protesilaos.com/emacs/denote#h:c916d8c5-540a-409f-b780-6ccbd90e088e">https://protesilaos.com/emacs/denote#h:c916d8c5-540a-409f-b780-6ccbd90e088e</a>.</p>

<h2>Check out the <code class="language-plaintext highlighter-rouge">denote-explore</code> package by Peter Prevos</h2>

<p>Peter posted this on the mailing list and I asked if it was okay to
mention it in the release notes of Denote. If you have a relevant
announcement to make, consider sending it to our mailing list.</p>

<blockquote>
  <p>Hi folks,</p>

  <p>I have just updated the denote-explore package:
<a href="https://github.com/pprevos/denote-explore">https://github.com/pprevos/denote-explore</a></p>

  <p>It does three things:</p>

  <ol>
    <li>Summary statistics: Count and visualise keywords and note types</li>
    <li>Random walks: Generate new ideas using serendipity</li>
    <li>Network visualisation: Visualise your Denote network of links</li>
  </ol>

  <p>It contains a rudimentary network visualisation function, relying
on the R language. I will need some D3.js expertise to improve the
visualisation.</p>

  <p>There should be a way to generate the basic network structure just
using Elisp and feeding a JSON to D3.js.</p>

  <p>Regards</p>

  <p>P:)</p>
</blockquote>

<h2>Miscellaneous</h2>

<ul>
  <li>
    <p>During this release cycle, I made lots of changes that in one way or
another related to the <code class="language-plaintext highlighter-rouge">denote-file-prompt</code>. It was relying on a
<code class="language-plaintext highlighter-rouge">project.el</code> mechanism that did not allow us to do everything we
needed. I have thus arranged for it to use the standard
<code class="language-plaintext highlighter-rouge">completing-read</code> mechanism. There are subtle differences in
behaviour, though the core idea is the same. This change fixes a few
not-so-obvious bugs. Interested parties are advised to refer to the
message in commit <code class="language-plaintext highlighter-rouge">50d1bbdf1e8ffe0f449f2f5da02f9b70322fff7d</code>.</p>
  </li>
  <li>
    <p>All commands that use the <code class="language-plaintext highlighter-rouge">denote</code> function internally (i.e.
anything that creates a new note) call the
<code class="language-plaintext highlighter-rouge">denote-after-new-note-hook</code> as part of their work. This hook is
mostly intended for advanced users who want to do something after a
new note is produced.</p>
  </li>
  <li>
    <p>The <code class="language-plaintext highlighter-rouge">menu-bar-mode</code> submenu of Denote is now positioned where it
should be after the “Tools”. Thanks to Noboru Ota for the patch:
<a href="https://lists.sr.ht/~protesilaos/denote/patches/44738">https://lists.sr.ht/~protesilaos/denote/patches/44738</a>.</p>
  </li>
  <li>
    <p>The <code class="language-plaintext highlighter-rouge">menu-bar-mode</code> entry of Denote includes the new commands. This
is a nice way to discover more of what Denote can do.</p>
  </li>
  <li>
    <p>The commands <code class="language-plaintext highlighter-rouge">denote-backlinks-prev</code> and <code class="language-plaintext highlighter-rouge">denote-backlinks-next</code> are
only meant to be used inside the Denote backlinks buffer. As such,
they now produce an error when called elsewhere (I wish I could hide
them from <code class="language-plaintext highlighter-rouge">M-x</code> altogether).</p>
  </li>
  <li>
    <p>The <code class="language-plaintext highlighter-rouge">denote-extract-keywords-from-front-matter</code> always returns a
list, thus avoiding an erroneous case. Thanks to Vedang Manerikar
for fixing the bug: <a href="https://lists.sr.ht/~protesilaos/denote/patches/46420">https://lists.sr.ht/~protesilaos/denote/patches/46420</a>.</p>
  </li>
  <li>
    <p>The <code class="language-plaintext highlighter-rouge">T</code> in the Denote identifier component now has its own face:
<code class="language-plaintext highlighter-rouge">denote-faces-time-delimiter</code>. This is used by the backlinks buffer
and the <code class="language-plaintext highlighter-rouge">denote-dired-mode</code>. The idea is to introduce a subtle
distinction between the date and time constituents of the
identifier. Those who want the <code class="language-plaintext highlighter-rouge">T</code> to be the same colour as the rest
of the identifier, can make the <code class="language-plaintext highlighter-rouge">denote-faces-time-delimiter</code>
inherit the <code class="language-plaintext highlighter-rouge">denote-faces-date</code>. For example:</p>

    <div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nv">set-face-attribute</span> <span class="ss">'denote-faces-time-delimiter</span> <span class="no">nil</span> <span class="ss">:inherit</span> <span class="ss">'denote-faces-date</span><span class="p">)</span>
</code></pre></div>    </div>

    <p>Thanks to Jean-Charles Bagneris for sending this patch:
<a href="https://lists.sr.ht/~protesilaos/denote/patches/43072">https://lists.sr.ht/~protesilaos/denote/patches/43072</a>.</p>
  </li>
  <li>
    <p>Fixed a <code class="language-plaintext highlighter-rouge">nil</code> file expansion in the function
<code class="language-plaintext highlighter-rouge">denote--extract-title-from-file-history</code>. Thanks to ezchi for
bringing this matter to my attention. It was done in issue 166 on
the GitHub mirror:
<a href="https://github.com/protesilaos/denote/issues/166">https://github.com/protesilaos/denote/issues/166</a>.</p>
  </li>
  <li>
    <p>A link can be created from inside an <code class="language-plaintext highlighter-rouge">org-capture</code> buffer. This
means that we can call <code class="language-plaintext highlighter-rouge">denote-link</code> (and related) while capturing a
new note with <code class="language-plaintext highlighter-rouge">org-capture</code>. Thanks to Peter Smith for reporting the
bug in issue 186 on the GitHub mirror:
<a href="https://github.com/protesilaos/denote/issues/186">https://github.com/protesilaos/denote/issues/186</a>.</p>
  </li>
  <li>
    <p>We stopped using <code class="language-plaintext highlighter-rouge">vc-rename-file</code> to rename files. The reason is
that it requires the buffer to be saved, but we do not want that
after modifying the front matter because we want to give the user a
chance to confirm what happened. Thanks to Frédéric Willem for
reporting the problem in issue 185 on the GitHub mirror:
<a href="https://github.com/protesilaos/denote/issues/185">https://github.com/protesilaos/denote/issues/185</a>.</p>
  </li>
  <li>
    <p>Thanks to Ivan Sokolov for removing a double negative logic in a
snippet. This was done in pull request 162 on the GitHub mirror:
<a href="https://github.com/protesilaos/denote/pull/162">https://github.com/protesilaos/denote/pull/162</a>.</p>
  </li>
</ul>

<h2>Git commits</h2>

<p>Just an overview of what we did. Every contribution matters.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~/Git/Projects/denote $ git shortlog 2.0.0..HEAD --summary --numbered
   152	Protesilaos Stavrou
    15	Jean-Philippe Gagné Guay
     5	Vedang Manerikar
     1	Alan Schmitt
     1	Ivan Sokolov
     1	Jean-Charles Bagneris
     1	Kostas Andreadis
     1	Noboru Ota
     1	Peter Prevos
</code></pre></div></div>